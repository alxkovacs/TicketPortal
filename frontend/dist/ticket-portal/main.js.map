{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/components/auth/login/login.component.ts","./src/app/components/auth/register/register.component.ts","./src/app/components/event/event-details/event-details.component.ts","./src/app/components/event/event-details/event-details.component.html","./src/app/components/event/event-form/event-form.component.ts","./src/app/components/event/event-form/event-form.component.html","./src/app/components/event/event-list/event-list.component.ts","./src/app/components/event/event-list/event-list.component.html","./src/app/components/footer/footer.component.ts","./src/app/components/footer/footer.component.html","./src/app/components/nav/navbar.component.ts","./src/app/components/nav/navbar.component.html","./src/app/components/ticket/ticket-list/ticket-list.component.ts","./src/app/components/ticket/ticket-list/ticket-list.component.html","./src/app/components/ticket/ticket-purchase/ticket-purchase.component.ts","./src/app/components/ticket/ticket-purchase/ticket-purchase.component.html","./src/app/core/services/error.service.ts","./src/app/core/services/loading.service.ts","./src/app/features/auth/services/auth.service.ts","./src/app/guards/admin.guard.ts","./src/app/guards/auth.guard.ts","./src/app/interceptors/auth.interceptor.ts","./src/app/services/auth.service.ts","./src/app/services/event.service.ts","./src/app/services/ticket.service.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { EventListComponent } from './components/event/event-list/event-list.component';\nimport { EventDetailsComponent } from './components/event/event-details/event-details.component';\nimport { EventFormComponent } from './components/event/event-form/event-form.component';\nimport { LoginComponent } from './components/auth/login/login.component';\nimport { RegisterComponent } from './components/auth/register/register.component';\nimport { TicketListComponent } from './components/ticket/ticket-list/ticket-list.component';\nimport { AuthGuard } from './guards/auth.guard';\nimport { AdminGuard } from './guards/admin.guard';\n\nconst routes: Routes = [\n  { path: '', redirectTo: '/events', pathMatch: 'full' },\n  { path: 'events', component: EventListComponent },\n  { path: 'events/create', component: EventFormComponent, canActivate: [AuthGuard, AdminGuard] },\n  { path: 'events/:id', component: EventDetailsComponent },\n  { path: 'events/:id/edit', component: EventFormComponent, canActivate: [AuthGuard, AdminGuard] },\n  { path: 'events/:id/purchase', component: EventFormComponent, canActivate: [AuthGuard] },\n  { path: 'tickets', component: TicketListComponent, canActivate: [AuthGuard] },\n  { path: 'auth/login', component: LoginComponent },\n  { path: 'auth/register', component: RegisterComponent },\n  { path: '**', redirectTo: '/events' }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }","import { Component, OnInit } from '@angular/core';\r\nimport { AuthService } from './features/auth/services/auth.service';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent implements OnInit {\r\n  title = 'Ticket Portal';\r\n\r\n  constructor(private authService: AuthService) {}\r\n\r\n  ngOnInit(): void {\r\n    // No need to call loadUser as it's handled in the AuthService constructor\r\n  }\r\n\r\n  logout(): void {\r\n    this.authService.logout();\r\n  }\r\n} ","<app-navbar></app-navbar>\n<div class=\"main-content container mt-4\">\n  <router-outlet></router-outlet>\n</div>\n<app-footer></app-footer>","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { NavbarComponent } from './components/nav/navbar.component';\nimport { FooterComponent } from './components/footer/footer.component';\nimport { EventListComponent } from './components/event/event-list/event-list.component';\nimport { EventDetailsComponent } from './components/event/event-details/event-details.component';\nimport { EventFormComponent } from './components/event/event-form/event-form.component';\nimport { LoginComponent } from './components/auth/login/login.component';\nimport { RegisterComponent } from './components/auth/register/register.component';\nimport { TicketListComponent } from './components/ticket/ticket-list/ticket-list.component';\nimport { TicketPurchaseComponent } from './components/ticket/ticket-purchase/ticket-purchase.component';\nimport { AuthService } from './services/auth.service';\nimport { EventService } from './services/event.service';\nimport { TicketService } from './services/ticket.service';\nimport { AuthGuard } from './guards/auth.guard';\nimport { AuthInterceptor } from './interceptors/auth.interceptor';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    NavbarComponent,\n    FooterComponent,\n    EventListComponent,\n    EventDetailsComponent,\n    EventFormComponent,\n    LoginComponent,\n    RegisterComponent,\n    TicketListComponent,\n    TicketPurchaseComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    HttpClientModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  providers: [\n    AuthService,\n    EventService,\n    TicketService,\n    AuthGuard,\n    { provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true }\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { } ","import { Component } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../../../services/auth.service';\n\n@Component({\n  selector: 'app-login',\n  template: `\n    <div class=\"row justify-content-center\">\n      <div class=\"col-md-6\">\n        <div class=\"card\">\n          <div class=\"card-header\">\n            <h3 class=\"text-center\">Login</h3>\n          </div>\n          <div class=\"card-body\">\n            <div *ngIf=\"errorMessage\" class=\"alert alert-danger mb-3\">\n              {{ errorMessage }}\n            </div>\n            <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\">\n              <div class=\"mb-3\">\n                <label for=\"email\" class=\"form-label\">Email</label>\n                <input\n                  type=\"email\"\n                  class=\"form-control\"\n                  id=\"email\"\n                  formControlName=\"email\"\n                  [class.is-invalid]=\"email.invalid && email.touched\"\n                >\n                <div class=\"invalid-feedback\" *ngIf=\"email.invalid && email.touched\">\n                  <div *ngIf=\"email.errors?.['required']\">Email is required</div>\n                  <div *ngIf=\"email.errors?.['email']\">Please enter a valid email</div>\n                </div>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"password\" class=\"form-label\">Password</label>\n                <input\n                  type=\"password\"\n                  class=\"form-control\"\n                  id=\"password\"\n                  formControlName=\"password\"\n                  [class.is-invalid]=\"password.invalid && password.touched\"\n                >\n                <div class=\"invalid-feedback\" *ngIf=\"password.invalid && password.touched\">\n                  <div *ngIf=\"password.errors?.['required']\">Password is required</div>\n                  <div *ngIf=\"password.errors?.['minlength']\">Password must be at least 6 characters</div>\n                </div>\n              </div>\n              <div class=\"d-grid\">\n                <button type=\"submit\" class=\"btn btn-primary\" [disabled]=\"loginForm.invalid\">\n                  Login\n                </button>\n              </div>\n            </form>\n          </div>\n          <div class=\"card-footer text-center\">\n            <p class=\"mb-0\">Don't have an account? <a routerLink=\"/register\">Register</a></p>\n          </div>\n        </div>\n      </div>\n    </div>\n  `\n})\nexport class LoginComponent {\n  loginForm: FormGroup;\n  errorMessage: string = '';\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private authService: AuthService,\n    private router: Router\n  ) {\n    this.loginForm = this.formBuilder.group({\n      email: ['', [Validators.required, Validators.email]],\n      password: ['', [Validators.required, Validators.minLength(6)]]\n    });\n  }\n\n  get email() {\n    return this.loginForm.get('email')!;\n  }\n\n  get password() {\n    return this.loginForm.get('password')!;\n  }\n\n  onSubmit(): void {\n    this.errorMessage = ''; // Reset any previous error messages\n    if (this.loginForm.invalid) {\n      return;\n    }\n\n    const { email, password } = this.loginForm.value;\n    this.authService.login({ email, password }).subscribe({\n      next: () => {\n        this.router.navigate(['/']);\n      },\n      error: (error) => {\n        console.error('Login failed:', error);\n        if (error.status === 401) {\n          this.errorMessage = 'Hibás email cím vagy jelszó!'; \n        } else {\n          this.errorMessage = 'Hiba történt a bejelentkezés során. Kérjük próbálja újra később.';\n        }\n      }\n    });\n  }\n} ","import { Component } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../../../services/auth.service';\n\n@Component({\n  selector: 'app-register',\n  template: `\n    <div class=\"row justify-content-center\">\n      <div class=\"col-md-6\">\n        <div class=\"card\">\n          <div class=\"card-header\">\n            <h3 class=\"text-center\">Register</h3>\n          </div>\n          <div class=\"card-body\">\n            <div *ngIf=\"errorMessage\" class=\"alert alert-danger mb-3\">\n              {{ errorMessage }}\n            </div>\n            <form [formGroup]=\"registerForm\" (ngSubmit)=\"onSubmit()\">\n              <div class=\"mb-3\">\n                <label for=\"firstName\" class=\"form-label\">First Name</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"firstName\"\n                  formControlName=\"firstName\"\n                  [class.is-invalid]=\"firstName.invalid && firstName.touched\"\n                >\n                <div class=\"invalid-feedback\" *ngIf=\"firstName.invalid && firstName.touched\">\n                  <div *ngIf=\"firstName.errors?.['required']\">First name is required</div>\n                </div>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"lastName\" class=\"form-label\">Last Name</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"lastName\"\n                  formControlName=\"lastName\"\n                  [class.is-invalid]=\"lastName.invalid && lastName.touched\"\n                >\n                <div class=\"invalid-feedback\" *ngIf=\"lastName.invalid && lastName.touched\">\n                  <div *ngIf=\"lastName.errors?.['required']\">Last name is required</div>\n                </div>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"email\" class=\"form-label\">Email</label>\n                <input\n                  type=\"email\"\n                  class=\"form-control\"\n                  id=\"email\"\n                  formControlName=\"email\"\n                  [class.is-invalid]=\"email.invalid && email.touched\"\n                >\n                <div class=\"invalid-feedback\" *ngIf=\"email.invalid && email.touched\">\n                  <div *ngIf=\"email.errors?.['required']\">Email is required</div>\n                  <div *ngIf=\"email.errors?.['email']\">Please enter a valid email</div>\n                </div>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"password\" class=\"form-label\">Password</label>\n                <input\n                  type=\"password\"\n                  class=\"form-control\"\n                  id=\"password\"\n                  formControlName=\"password\"\n                  [class.is-invalid]=\"password.invalid && password.touched\"\n                >\n                <div class=\"invalid-feedback\" *ngIf=\"password.invalid && password.touched\">\n                  <div *ngIf=\"password.errors?.['required']\">Password is required</div>\n                  <div *ngIf=\"password.errors?.['minlength']\">Password must be at least 6 characters</div>\n                </div>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"confirmPassword\" class=\"form-label\">Confirm Password</label>\n                <input\n                  type=\"password\"\n                  class=\"form-control\"\n                  id=\"confirmPassword\"\n                  formControlName=\"confirmPassword\"\n                  [class.is-invalid]=\"confirmPassword.invalid && confirmPassword.touched\"\n                >\n                <div class=\"invalid-feedback\" *ngIf=\"confirmPassword.invalid && confirmPassword.touched\">\n                  <div *ngIf=\"confirmPassword.errors?.['required']\">Confirm password is required</div>\n                  <div *ngIf=\"confirmPassword.errors?.['passwordMismatch']\">Passwords do not match</div>\n                </div>\n              </div>\n              <div class=\"d-grid\">\n                <button type=\"submit\" class=\"btn btn-primary\" [disabled]=\"registerForm.invalid\">\n                  Register\n                </button>\n              </div>\n            </form>\n          </div>\n          <div class=\"card-footer text-center\">\n            <p class=\"mb-0\">Already have an account? <a routerLink=\"/login\">Login</a></p>\n          </div>\n        </div>\n      </div>\n    </div>\n  `\n})\nexport class RegisterComponent {\n  registerForm: FormGroup;\n  errorMessage: string = '';\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private authService: AuthService,\n    private router: Router\n  ) {\n    this.registerForm = this.formBuilder.group({\n      firstName: ['', Validators.required],\n      lastName: ['', Validators.required],\n      email: ['', [Validators.required, Validators.email]],\n      password: ['', [Validators.required, Validators.minLength(6)]],\n      confirmPassword: ['', Validators.required]\n    }, {\n      validators: this.passwordMatchValidator\n    });\n  }\n\n  get firstName() {\n    return this.registerForm.get('firstName')!;\n  }\n\n  get lastName() {\n    return this.registerForm.get('lastName')!;\n  }\n\n  get email() {\n    return this.registerForm.get('email')!;\n  }\n\n  get password() {\n    return this.registerForm.get('password')!;\n  }\n\n  get confirmPassword() {\n    return this.registerForm.get('confirmPassword')!;\n  }\n\n  passwordMatchValidator(form: FormGroup) {\n    const password = form.get('password')?.value;\n    const confirmPassword = form.get('confirmPassword')?.value;\n    return password === confirmPassword ? null : { passwordMismatch: true };\n  }\n\n  onSubmit(): void {\n    this.errorMessage = '';\n    if (this.registerForm.invalid) {\n      return;\n    }\n\n    const { firstName, lastName, email, password } = this.registerForm.value;\n    this.authService.register({ firstName, lastName, email, password }).subscribe({\n      next: () => {\n        this.router.navigate(['/login']);\n      },\n      error: (error) => {\n        console.error('Registration failed:', error);\n        if (error.status === 409) {\n          this.errorMessage = 'Ez az e-mail cím már használatban van.';\n        } else if (error.status === 400) {\n          this.errorMessage = 'A megadott adatok érvénytelenek. Kérjük ellenőrizze és próbálja újra.';\n        } else {\n          this.errorMessage = 'Hiba történt a regisztráció során. Kérjük próbálja újra később.';\n        }\n      }\n    });\n  }\n}","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { EventService } from '../../../services/event.service';\r\nimport { Event } from '../../../models/event.model';\r\nimport { AuthService } from '../../../services/auth.service';\r\nimport { User } from '@app/models/user.model';\r\n\r\n@Component({\r\n  selector: 'app-event-details',\r\n  templateUrl: './event-details.component.html',\r\n  styleUrls: ['./event-details.component.css']\r\n})\r\nexport class EventDetailsComponent implements OnInit {\r\n  event: Event | null = null;\r\n  loading = true;\r\n  error: string | null = null;\r\n  currentUser: User | null = null;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private eventService: EventService,\r\n    public authService: AuthService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    const eventId = this.route.snapshot.paramMap.get('id');\r\n    if (eventId) {\r\n      this.loadEvent(eventId);\r\n    }\r\n    this.currentUser = this.authService.getCurrentUser();\r\n  }\r\n\r\n  loadEvent(id: string): void {\r\n    this.loading = true;\r\n    this.eventService.getEvent(id).subscribe({\r\n      next: (event) => {\r\n        this.event = event;\r\n        this.loading = false;\r\n      },\r\n      error: (err) => {\r\n        this.error = 'Hiba történt az esemény betöltése közben.';\r\n        this.loading = false;\r\n        console.error('Error loading event:', err);\r\n      }\r\n    });\r\n  }\r\n\r\n  purchaseTicket(categoryId: string): void {\r\n    if (this.event) {\r\n      this.router.navigate(['/events', this.event._id, 'purchase'], {\r\n        queryParams: { category: categoryId }\r\n      });\r\n    }\r\n  }\r\n\r\n  editEvent(): void {\r\n    if (this.event) {\r\n      this.router.navigate(['/events', this.event._id, 'edit']);\r\n    }\r\n  }\r\n} ","<div class=\"container mt-4\">\r\n  <div *ngIf=\"loading\" class=\"text-center\">\r\n    <div class=\"spinner-border\" role=\"status\">\r\n      <span class=\"visually-hidden\">Loading...</span>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf=\"error\" class=\"alert alert-danger\">\r\n    {{ error }}\r\n  </div>\r\n\r\n  <div *ngIf=\"event && !loading\" class=\"row\">\r\n    <div class=\"col-md-8\">\r\n      <div class=\"card\">\r\n        <img *ngIf=\"event.imageUrl\" [src]=\"event.imageUrl\" class=\"card-img-top\" [alt]=\"event.title\">\r\n        <div class=\"card-body\">\r\n          <h2 class=\"card-title\">{{ event.title }}</h2>\r\n          <p class=\"card-text\">{{ event.description }}</p>\r\n          <ul class=\"list-unstyled\">\r\n            <li><strong>Dátum:</strong> {{ event.date | date:'yyyy.MM.dd HH:mm' }}</li>\r\n            <li><strong>Helyszín:</strong> {{ event.location }}</li>\r\n            <li><strong>Elérhető jegyek:</strong> {{ event.availableTickets }}</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"card mt-4\">\r\n        <div class=\"card-header\">\r\n          <h3>Jegy kategóriák</h3>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div *ngFor=\"let category of event.ticketCategories\" class=\"mb-3\">\r\n            <h5>{{ category.name }}</h5>\r\n            <p><strong>Ár:</strong> {{ category.price }} Ft</p>\r\n            <p><strong>Elérhető jegyek:</strong> {{ category.availableTickets }}</p>\r\n            <button\r\n              *ngIf=\"authService.isAuthenticated() && category.availableTickets > 0\"\r\n              class=\"btn btn-primary\"\r\n              (click)=\"purchaseTicket(category._id)\"\r\n            >\r\n              Jegyvásárlás\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"col-md-4\">\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <button\r\n            *ngIf=\"authService.isAuthenticated()\"\r\n            class=\"btn btn-primary w-100 mb-2\"\r\n            (click)=\"purchaseTicket(event.ticketCategories[0]._id)\"\r\n            [disabled]=\"event.availableTickets === 0\"\r\n          >\r\n            Jegyvásárlás\r\n          </button>\r\n          <button\r\n            *ngIf=\"authService.getUserRole() === 'ADMIN'\"\r\n            class=\"btn btn-warning w-100\"\r\n            (click)=\"editEvent()\"\r\n          >\r\n            Esemény szerkesztése\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div> ","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators, FormArray } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { EventService } from '../../../services/event.service';\nimport { Event, NewEvent, TicketCategory } from '../../../models/event.model';\n\n@Component({\n  selector: 'app-event-form',\n  templateUrl: './event-form.component.html',\n  styleUrls: ['./event-form.component.css']\n})\nexport class EventFormComponent implements OnInit {\n  eventForm: FormGroup;\n  isEditMode = false;\n  eventId: string | null = null;\n  loading = false;\n  error: string | null = null;\n\n  constructor(\n    private fb: FormBuilder,\n    private eventService: EventService,\n    private route: ActivatedRoute,\n    public router: Router\n  ) {\n    this.eventForm = this.fb.group({\n      title: ['', Validators.required],\n      description: ['', Validators.required],\n      date: ['', Validators.required],\n      location: ['', Validators.required],\n      imageUrl: [''],\n      ticketCategories: this.fb.array([])\n    });\n  }\n\n  ngOnInit(): void {\n    this.eventId = this.route.snapshot.paramMap.get('id');\n    if (this.eventId) {\n      this.isEditMode = true;\n      this.loadEvent(this.eventId);\n    }\n  }\n\n  get ticketCategories(): FormArray {\n    return this.eventForm.get('ticketCategories') as FormArray;\n  }\n\n  addTicketCategory(): void {\n    this.ticketCategories.push(this.fb.group({\n      name: ['', Validators.required],\n      price: [0, [Validators.required, Validators.min(0)]],\n      availableTickets: [0, [Validators.required, Validators.min(0)]]\n    }));\n  }\n\n  removeTicketCategory(index: number): void {\n    this.ticketCategories.removeAt(index);\n  }\n\n  loadEvent(id: string): void {\n    this.loading = true;\n    this.eventService.getEvent(id).subscribe({\n      next: (event: Event) => {\n        this.eventForm.patchValue({\n          title: event.title,\n          description: event.description,\n          date: new Date(event.date).toISOString().split('T')[0],\n          location: event.location,\n          imageUrl: event.imageUrl\n        });\n\n        event.ticketCategories.forEach((category: TicketCategory) => {\n          this.ticketCategories.push(this.fb.group({\n            name: [category.name, Validators.required],\n            price: [category.price, [Validators.required, Validators.min(0)]],\n            availableTickets: [category.availableTickets, [Validators.required, Validators.min(0)]]\n          }));\n        });\n\n        this.loading = false;\n      },\n      error: (error: any) => {\n        this.error = 'Hiba történt az esemény betöltése közben.';\n        this.loading = false;\n        console.error('Error loading event:', error);\n      }\n    });\n  }\n\n  onSubmit(): void {\n    if (this.eventForm.invalid) {\n      return;\n    }\n\n    this.loading = true;\n    \n    // Az adatok előkészítése a form-ból\n    const formData = this.eventForm.value;\n    \n    // Biztosítsuk, hogy legyen legalább egy jegykategoria, ha nincs formában\n    if (!formData.ticketCategories || formData.ticketCategories.length === 0) {\n      this.addTicketCategory();\n      formData.ticketCategories = [{\n        name: 'Alap jegy',\n        price: 1000,\n        availableTickets: 100\n      }];\n    }\n    \n    // Kezeljük a hibahelyzetet, amikor a ticketCategories tömb, de üres\n    if (Array.isArray(formData.ticketCategories) && formData.ticketCategories.length === 0) {\n      formData.ticketCategories = [{\n        name: 'Alap jegy',\n        price: 1000,\n        availableTickets: 100\n      }];\n    }\n    \n    // Szükéges formázások és kiegészítések\n    const newEventData: NewEvent = {\n      title: formData.title,\n      description: formData.description,\n      date: new Date(formData.date).toISOString(),\n      location: formData.location,\n      imageUrl: formData.imageUrl || '',\n      ticketCategories: formData.ticketCategories,\n      availableTickets: this.calculateTotalAvailableTickets(formData.ticketCategories)\n    };\n    \n    console.log('Elküldött esemény adatok:', newEventData);\n    \n    // Létrehozás vagy frissítés az edit mode alapján\n    if (this.isEditMode && this.eventId) {\n      // ID-t is megadunk az updateEvent-hez, mivel az már létező esemény (Event típus, nem NewEvent)\n      const existingEvent = {\n        _id: this.eventId,\n        ...newEventData\n      };\n      this.eventService.updateEvent(this.eventId, existingEvent).subscribe({\n        next: () => {\n          this.router.navigate(['/events', this.eventId]);\n        },\n        error: (error: any) => {\n          this.error = 'Hiba történt az esemény frissítése közben.';\n          this.loading = false;\n          console.error('Error updating event:', error);\n        }\n      });\n    } else {\n      this.eventService.createEvent(newEventData).subscribe({\n        next: (event: Event) => {\n          this.router.navigate(['/events', event._id]);\n        },\n        error: (error: any) => {\n          this.error = 'Hiba történt az esemény létrehozása közben.';\n          this.loading = false;\n          console.error('Error creating event:', error);\n          \n          // Teljes hiba megjelenítése debug célból\n          if (error.error) {\n            console.log('Szerver hiba részletei:', error.error);\n            if (error.error.message) {\n              console.log('Szerver hibaüzenet:', error.error.message);\n              this.error = `Szerver hiba: ${error.error.message}`;\n            }\n          }\n          \n          // Utolsó mentsvarként próbáljuk meg string formátumra konvertálni a JSON objektumot\n          try {\n            const requestBody = JSON.stringify(newEventData);\n            console.log('Elküldött adatok stringként:', requestBody);\n          } catch (e) {\n            console.error('Hiba a JSON stringgelés során:', e);\n          }\n        }\n      });\n    }\n  }\n  \n  /**\n   * Kiszámítja az összes elérhető jegy számát az összes kategóriából\n   */\n  private calculateTotalAvailableTickets(categories: any[]): number {\n    if (!categories || categories.length === 0) {\n      return 0;\n    }\n    \n    return categories.reduce((total, category) => {\n      return total + (parseInt(category.availableTickets) || 0);\n    }, 0);\n  }\n} ","<div class=\"container mt-4\">\r\n  <div class=\"row justify-content-center\">\r\n    <div class=\"col-md-8\">\r\n      <div class=\"card\">\r\n        <div class=\"card-header\">\r\n          <h3 class=\"text-center\">{{ isEditMode ? 'Esemény szerkesztése' : 'Új esemény' }}</h3>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <form [formGroup]=\"eventForm\" (ngSubmit)=\"onSubmit()\">\r\n            <div class=\"mb-3\">\r\n              <label for=\"title\" class=\"form-label\">Cím</label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"title\"\r\n                formControlName=\"title\"\r\n                [class.is-invalid]=\"eventForm.get('title')?.invalid && eventForm.get('title')?.touched\"\r\n              >\r\n              <div class=\"invalid-feedback\" *ngIf=\"eventForm.get('title')?.invalid && eventForm.get('title')?.touched\">\r\n                A cím megadása kötelező\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"mb-3\">\r\n              <label for=\"description\" class=\"form-label\">Leírás</label>\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"description\"\r\n                formControlName=\"description\"\r\n                rows=\"4\"\r\n                [class.is-invalid]=\"eventForm.get('description')?.invalid && eventForm.get('description')?.touched\"\r\n              ></textarea>\r\n              <div class=\"invalid-feedback\" *ngIf=\"eventForm.get('description')?.invalid && eventForm.get('description')?.touched\">\r\n                A leírás megadása kötelező\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"mb-3\">\r\n              <label for=\"date\" class=\"form-label\">Dátum</label>\r\n              <input\r\n                type=\"date\"\r\n                class=\"form-control\"\r\n                id=\"date\"\r\n                formControlName=\"date\"\r\n                [class.is-invalid]=\"eventForm.get('date')?.invalid && eventForm.get('date')?.touched\"\r\n              >\r\n              <div class=\"invalid-feedback\" *ngIf=\"eventForm.get('date')?.invalid && eventForm.get('date')?.touched\">\r\n                A dátum megadása kötelező\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"mb-3\">\r\n              <label for=\"location\" class=\"form-label\">Helyszín</label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"location\"\r\n                formControlName=\"location\"\r\n                [class.is-invalid]=\"eventForm.get('location')?.invalid && eventForm.get('location')?.touched\"\r\n              >\r\n              <div class=\"invalid-feedback\" *ngIf=\"eventForm.get('location')?.invalid && eventForm.get('location')?.touched\">\r\n                A helyszín megadása kötelező\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"mb-3\">\r\n              <label for=\"imageUrl\" class=\"form-label\">Kép URL</label>\r\n              <input\r\n                type=\"url\"\r\n                class=\"form-control\"\r\n                id=\"imageUrl\"\r\n                formControlName=\"imageUrl\"\r\n              >\r\n            </div>\r\n\r\n            <div formArrayName=\"ticketCategories\">\r\n              <div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n                <h4>Jegy kategóriák</h4>\r\n                <button type=\"button\" class=\"btn btn-primary\" (click)=\"addTicketCategory()\">\r\n                  Kategória hozzáadása\r\n                </button>\r\n              </div>\r\n\r\n              <div\r\n                *ngFor=\"let category of ticketCategories.controls; let i = index\"\r\n                [formGroupName]=\"i\"\r\n                class=\"card mb-3\"\r\n              >\r\n                <div class=\"card-body\">\r\n                  <div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n                    <h5 class=\"card-title mb-0\">Kategória {{ i + 1 }}</h5>\r\n                    <button\r\n                      type=\"button\"\r\n                      class=\"btn btn-danger btn-sm\"\r\n                      (click)=\"removeTicketCategory(i)\"\r\n                    >\r\n                      Törlés\r\n                    </button>\r\n                  </div>\r\n\r\n                  <div class=\"mb-3\">\r\n                    <label [for]=\"'name' + i\" class=\"form-label\">Név</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      class=\"form-control\"\r\n                      [id]=\"'name' + i\"\r\n                      formControlName=\"name\"\r\n                      [class.is-invalid]=\"ticketCategories.at(i).get('name')?.invalid && ticketCategories.at(i).get('name')?.touched\"\r\n                    >\r\n                    <div\r\n                      class=\"invalid-feedback\"\r\n                      *ngIf=\"ticketCategories.at(i).get('name')?.invalid && ticketCategories.at(i).get('name')?.touched\"\r\n                    >\r\n                      A név megadása kötelező\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class=\"mb-3\">\r\n                    <label [for]=\"'price' + i\" class=\"form-label\">Ár</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      class=\"form-control\"\r\n                      [id]=\"'price' + i\"\r\n                      formControlName=\"price\"\r\n                      [class.is-invalid]=\"ticketCategories.at(i).get('price')?.invalid && ticketCategories.at(i).get('price')?.touched\"\r\n                    >\r\n                    <div\r\n                      class=\"invalid-feedback\"\r\n                      *ngIf=\"ticketCategories.at(i).get('price')?.invalid && ticketCategories.at(i).get('price')?.touched\"\r\n                    >\r\n                      Az ár megadása kötelező és nem lehet negatív\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class=\"mb-3\">\r\n                    <label [for]=\"'availableTickets' + i\" class=\"form-label\">Elérhető jegyek</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      class=\"form-control\"\r\n                      [id]=\"'availableTickets' + i\"\r\n                      formControlName=\"availableTickets\"\r\n                      [class.is-invalid]=\"ticketCategories.at(i).get('availableTickets')?.invalid && ticketCategories.at(i).get('availableTickets')?.touched\"\r\n                    >\r\n                    <div\r\n                      class=\"invalid-feedback\"\r\n                      *ngIf=\"ticketCategories.at(i).get('availableTickets')?.invalid && ticketCategories.at(i).get('availableTickets')?.touched\"\r\n                    >\r\n                      Az elérhető jegyek számának megadása kötelező és nem lehet negatív\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"d-grid gap-2\">\r\n              <button type=\"submit\" class=\"btn btn-primary\" [disabled]=\"eventForm.invalid || loading\">\r\n                {{ isEditMode ? 'Frissítés' : 'Létrehozás' }}\r\n              </button>\r\n              <button type=\"button\" class=\"btn btn-secondary\" (click)=\"router.navigate(['/events'])\">\r\n                Mégse\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div> ","import { Component, OnInit } from '@angular/core';\nimport { EventService } from '../../../services/event.service';\nimport { Event } from '../../../models/event.model';\nimport { AuthService } from '../../../services/auth.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-event-list',\n  templateUrl: './event-list.component.html',\n  styleUrls: ['./event-list.component.css']\n})\nexport class EventListComponent implements OnInit {\n  events: Event[] = [];\n  loading = true;\n  error: string | null = null;\n  \n  // isAdmin getter, ami egyszerűen meghívja az authService.isAdmin() függvényt\n  get isAdmin(): boolean {\n    // Direkt debug információk a hiba megoldásához\n    console.log('isAdmin getter hívása, eredmény:', this.authService.isAdmin());\n    return this.authService.isAdmin();\n  }\n\n  constructor(\n    private eventService: EventService,\n    public authService: AuthService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.loadEvents();\n  }\n  \n  /**\n   * Ellenőrzi, hogy a felhasználó be van-e jelentkezve\n   */\n  isAuthenticated(): boolean {\n    try {\n      const userData = localStorage.getItem('currentUser');\n      return !!userData; // Ha van felhasználói adat, akkor be van jelentkezve\n    } catch (error) {\n      console.error('Hiba a bejelentkezési állapot ellenőrzése közben:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Ellenőrzi, hogy a bejelentkezett felhasználó rendelkezik-e admin jogosultsággal\n   */\n  hasAdminRole(): boolean {\n    // Ahelyett, hogy megpróbálnánk sajt logikát implementni, egyszerűen használjuk az authService-t\n    // Így ha a probléma jelen van, akkor csak egy helyen kell javítani\n    const isAdmin = this.authService.isAdmin();\n    console.log('hasAdminRole eredménye (authService.isAdmin()):', isAdmin);\n    \n    // Ha ez most false, akkor közvetlenül próbáljuk meg a token nélkül, a user objektum megtekintésével\n    if (!isAdmin) {\n      try {\n        const userDataStr = localStorage.getItem('user');\n        if (userDataStr) {\n          const userData = JSON.parse(userDataStr);\n          console.log('User objektum a localStorage-ból:', userData);\n          if (userData && userData.role === 'admin') {\n            console.log('User objektum tartalmaz admin szerepkört!');\n            return true;\n          }\n        } else {\n          console.log('Nincs user objektum a localStorage-ban');\n        }\n      } catch (e) {\n        console.error('Hiba a user objektum feldolgozása közben:', e);\n      }\n    }\n    \n    return isAdmin;\n  }\n\n  loadEvents(): void {\n    this.loading = true;\n    this.eventService.getEvents().subscribe({\n      next: (events) => {\n        this.events = events;\n        this.loading = false;\n      },\n      error: (err) => {\n        this.error = 'Hiba történt az események betöltése közben.';\n        this.loading = false;\n        console.error('Error loading events:', err);\n      }\n    });\n  }\n\n  viewDetails(eventId: string): void {\n    this.router.navigate(['/events', eventId]);\n  }\n\n  purchaseTicket(eventId: string): void {\n    this.router.navigate(['/events', eventId, 'purchase']);\n  }\n\n  editEvent(eventId: string): void {\n    this.router.navigate(['/events', eventId, 'edit']);\n  }\n\n\n\n  /**\n   * Új esemény létrehozásához navigál az esemény űrlapra\n   */\n  createEvent(): void {\n    // Egyszerű, közvetlen navigáció az új esemény űrlapra\n    this.router.navigate(['/events/create']);\n  }\n} ","<div class=\"container mt-4\">\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <h2>Események</h2>\n      <div *ngIf=\"loading\" class=\"text-center\">\n        <div class=\"spinner-border\" role=\"status\">\n          <span class=\"visually-hidden\">Loading...</span>\n        </div>\n      </div>\n      <div *ngIf=\"error\" class=\"alert alert-danger\">\n        {{ error }}\n      </div>\n      <!-- Az Új esemény gomb csak admin felhasználók számára jelenik meg -->\n      <div *ngIf=\"hasAdminRole()\" class=\"mb-3 text-end\">\n        <button class=\"btn btn-success\" (click)=\"createEvent()\">Új esemény</button>\n      </div>\n      <div class=\"row\">\n        <div *ngFor=\"let event of events\" class=\"col-md-4 mb-4\">\n          <div class=\"card h-100\">\n            <img *ngIf=\"event.imageUrl\" [src]=\"event.imageUrl\" class=\"card-img-top\" [alt]=\"event.title\">\n            <div class=\"card-body\">\n              <h5 class=\"card-title\">{{ event.title }}</h5>\n              <p class=\"card-text\">{{ event.description }}</p>\n              <p class=\"card-text\"><small class=\"text-muted\">{{ event.date | date:'yyyy.MM.dd HH:mm' }}</small></p>\n              <p class=\"card-text\"><small class=\"text-muted\">{{ event.location }}</small></p>\n              <p class=\"card-text\">Elérhető jegyek: {{ event.availableTickets }}</p>\n            </div>\n            <div class=\"card-footer\">\n              <button class=\"btn btn-primary me-2\" (click)=\"viewDetails(event._id)\">Részletek</button>\n              <button *ngIf=\"isAuthenticated() && event.availableTickets > 0\" \n                      class=\"btn btn-success me-2\" \n                      (click)=\"purchaseTicket(event._id)\">\n                Jegyvásárlás\n              </button>\n              <button *ngIf=\"hasAdminRole()\" \n                      class=\"btn btn-warning\" \n                      (click)=\"editEvent(event._id)\">\n                Szerkesztés\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div> ","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-footer',\n  templateUrl: './footer.component.html',\n  styleUrls: ['./footer.component.css']\n})\nexport class FooterComponent {\n  currentYear = new Date().getFullYear();\n}","<footer class=\"footer mt-auto py-3 bg-dark text-white\">\n  <div class=\"container text-center\">\n    <span>&copy; {{ currentYear }} Ticket Portal. Minden jog fenntartva.</span>\n  </div>\n</footer>","import { Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from '../../services/auth.service';\r\n\r\n@Component({\r\n  selector: 'app-navbar',\r\n  templateUrl: './navbar.component.html',\r\n  styleUrls: ['./navbar.component.css']\r\n})\r\nexport class NavbarComponent {\r\n  constructor(\r\n    public authService: AuthService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  logout(): void {\r\n    this.authService.logout();\r\n    this.router.navigate(['/login']);\r\n  }\r\n} ","<nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n  <div class=\"container\">\n    <a class=\"navbar-brand\" routerLink=\"/\">Ticket Portal</a>\n    <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\n      <span class=\"navbar-toggler-icon\"></span>\n    </button>\n    <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n      <ul class=\"navbar-nav me-auto\">\n        <li class=\"nav-item\">\n          <a class=\"nav-link\" routerLink=\"/events\">Események</a>\n        </li>\n        <li class=\"nav-item\" *ngIf=\"authService.isAuthenticated()\">\n          <a class=\"nav-link\" routerLink=\"/tickets\">Jegyeim</a>\n        </li>\n      </ul>\n      <ul class=\"navbar-nav\">\n        <li class=\"nav-item\" *ngIf=\"!authService.isAuthenticated()\">\n          <a class=\"nav-link\" routerLink=\"/auth/login\">Bejelentkezés</a>\n        </li>\n        <li class=\"nav-item\" *ngIf=\"!authService.isAuthenticated()\">\n          <a class=\"nav-link\" routerLink=\"/auth/register\">Regisztráció</a>\n        </li>\n        <li class=\"nav-item\" *ngIf=\"authService.isAuthenticated()\">\n          <a class=\"nav-link\" (click)=\"logout()\">Kijelentkezés</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</nav> ","import { Component, OnInit } from '@angular/core';\r\nimport { TicketService } from '../../../services/ticket.service';\r\nimport { Ticket } from '../../../models/ticket.model';\r\n\r\n@Component({\r\n  selector: 'app-ticket-list',\r\n  templateUrl: './ticket-list.component.html',\r\n  styleUrls: ['./ticket-list.component.css']\r\n})\r\nexport class TicketListComponent implements OnInit {\r\n  tickets: Ticket[] = [];\r\n  loading = false;\r\n  error: string | null = null;\r\n\r\n  constructor(private ticketService: TicketService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadTickets();\r\n  }\r\n\r\n  loadTickets(): void {\r\n    this.loading = true;\r\n    this.error = null;\r\n\r\n    this.ticketService.getUserTickets().subscribe({\r\n      next: (tickets: Ticket[]) => {\r\n        this.tickets = tickets;\r\n        this.loading = false;\r\n      },\r\n      error: (err: any) => {\r\n        this.error = 'Error loading tickets. Please try again later.';\r\n        this.loading = false;\r\n        console.error('Error loading tickets:', err);\r\n      }\r\n    });\r\n  }\r\n\r\n  cancelTicket(ticketId: string): void {\r\n    if (confirm('Are you sure you want to cancel this ticket?')) {\r\n      this.ticketService.cancelTicket(ticketId).subscribe({\r\n        next: () => {\r\n          this.loadTickets();\r\n        },\r\n        error: (err: any) => {\r\n          this.error = 'Error canceling ticket. Please try again later.';\r\n          console.error('Error canceling ticket:', err);\r\n        }\r\n      });\r\n    }\r\n  }\r\n} ","<div class=\"row\">\r\n  <div class=\"col-12 mb-4\">\r\n    <h2>My Tickets</h2>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"row\">\r\n  <div class=\"col-md-6 mb-4\" *ngFor=\"let ticket of tickets\">\r\n    <div class=\"card h-100\">\r\n      <div class=\"card-body\">\r\n        <h5 class=\"card-title\">{{ ticket.event.title }}</h5>\r\n        <ul class=\"list-unstyled\">\r\n          <li><strong>Date:</strong> {{ ticket.event.date | date:'medium' }}</li>\r\n          <li><strong>Location:</strong> {{ ticket.event.location }}</li>\r\n          <li><strong>Category:</strong> {{ ticket.category.name }}</li>\r\n          <li><strong>Price:</strong> ${{ ticket.category.price }}</li>\r\n          <li><strong>Purchase Date:</strong> {{ ticket.purchaseDate | date:'medium' }}</li>\r\n          <li>\r\n            <strong>Status:</strong>\r\n            <span [class]=\"ticket.status === 'active' ? 'text-success' : 'text-danger'\">\r\n              {{ ticket.status | titlecase }}\r\n            </span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <div class=\"card-footer\">\r\n        <div class=\"d-grid gap-2\">\r\n          <button\r\n            *ngIf=\"ticket.status === 'active'\"\r\n            class=\"btn btn-danger\"\r\n            (click)=\"cancelTicket(ticket._id)\"\r\n          >\r\n            Cancel Ticket\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"row\" *ngIf=\"!loading && tickets.length === 0\">\r\n  <div class=\"col-12\">\r\n    <div class=\"alert alert-info\">\r\n      You don't have any tickets yet.\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"row\" *ngIf=\"loading\">\r\n  <div class=\"col-12\">\r\n    <div class=\"alert alert-info\">\r\n      Loading tickets...\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"row\" *ngIf=\"error\">\r\n  <div class=\"col-12\">\r\n    <div class=\"alert alert-danger\">\r\n      {{ error }}\r\n    </div>\r\n  </div>\r\n</div> ","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { EventService } from '../../../services/event.service';\r\nimport { Event, TicketCategory } from '../../../models/event.model';\r\nimport { AuthService } from '../../../services/auth.service';\r\n\r\n@Component({\r\n  selector: 'app-ticket-purchase',\r\n  templateUrl: './ticket-purchase.component.html',\r\n  styleUrls: ['./ticket-purchase.component.css']\r\n})\r\nexport class TicketPurchaseComponent implements OnInit {\r\n  event: Event | null = null;\r\n  loading = true;\r\n  error: string | null = null;\r\n  purchaseForm: FormGroup;\r\n  selectedCategory: TicketCategory | null = null;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private eventService: EventService,\r\n    private authService: AuthService,\r\n    private fb: FormBuilder\r\n  ) {\r\n    this.purchaseForm = this.fb.group({\r\n      categoryId: ['', Validators.required],\r\n      quantity: [1, [Validators.required, Validators.min(1)]]\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    const eventId = this.route.snapshot.paramMap.get('id');\r\n    if (eventId) {\r\n      this.loadEvent(eventId);\r\n    }\r\n  }\r\n\r\n  loadEvent(id: string): void {\r\n    this.loading = true;\r\n    this.eventService.getEvent(id).subscribe({\r\n      next: (event) => {\r\n        this.event = event;\r\n        this.loading = false;\r\n      },\r\n      error: (err) => {\r\n        this.error = 'Hiba történt az esemény betöltése közben.';\r\n        this.loading = false;\r\n        console.error('Error loading event:', err);\r\n      }\r\n    });\r\n  }\r\n\r\n  onCategoryChange(): void {\r\n    const categoryId = this.purchaseForm.get('categoryId')?.value;\r\n    this.selectedCategory = this.event?.ticketCategories.find(c => c._id === categoryId) || null;\r\n  }\r\n\r\n  onSubmit(): void {\r\n    if (this.purchaseForm.invalid || !this.event) {\r\n      return;\r\n    }\r\n\r\n    const { categoryId, quantity } = this.purchaseForm.value;\r\n    // TODO: Implement ticket purchase logic\r\n    console.log('Purchase:', { eventId: this.event._id, categoryId, quantity });\r\n  }\r\n} ","<div class=\"container mt-4\">\n  <div *ngIf=\"loading\" class=\"text-center\">\n    <div class=\"spinner-border\" role=\"status\">\n      <span class=\"visually-hidden\">Loading...</span>\n    </div>\n  </div>\n\n  <div *ngIf=\"error\" class=\"alert alert-danger\">\n    {{ error }}\n  </div>\n\n  <div *ngIf=\"event && !loading\" class=\"row justify-content-center\">\n    <div class=\"col-md-8\">\n      <div class=\"card\">\n        <div class=\"card-header\">\n          <h3 class=\"card-title\">{{ event.title }}</h3>\n        </div>\n        <div class=\"card-body\">\n          <form [formGroup]=\"purchaseForm\" (ngSubmit)=\"onSubmit()\">\n            <div class=\"mb-3\">\n              <label for=\"categoryId\" class=\"form-label\">Jegy kategória</label>\n              <select\n                id=\"categoryId\"\n                class=\"form-select\"\n                formControlName=\"categoryId\"\n                (change)=\"onCategoryChange()\"\n              >\n                <option value=\"\">Válassz kategóriát</option>\n                <option\n                  *ngFor=\"let category of event.ticketCategories\"\n                  [value]=\"category._id\"\n                >\n                  {{ category.name }} - {{ category.price }} Ft ({{ category.availableTickets }} db)\n                </option>\n              </select>\n            </div>\n\n            <div class=\"mb-3\">\n              <label for=\"quantity\" class=\"form-label\">Darabszám</label>\n              <input\n                type=\"number\"\n                id=\"quantity\"\n                class=\"form-control\"\n                formControlName=\"quantity\"\n                [min]=\"1\"\n                [max]=\"selectedCategory?.availableTickets ?? null\"\n              >\n            </div>\n\n            <div *ngIf=\"selectedCategory\" class=\"mb-3\">\n              <h5>Összesen: {{ selectedCategory.price * purchaseForm.get('quantity')?.value }} Ft</h5>\n            </div>\n\n            <div class=\"d-grid\">\n              <button\n                type=\"submit\"\n                class=\"btn btn-primary\"\n                [disabled]=\"purchaseForm.invalid || !selectedCategory\"\n              >\n                Vásárlás\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</div> ","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ErrorService {\r\n  private errorSubject = new BehaviorSubject<string | null>(null);\r\n  error$ = this.errorSubject.asObservable();\r\n\r\n  handleError(error: any): void {\r\n    const errorMessage = error.error?.message || error.message || 'An error occurred';\r\n    this.errorSubject.next(errorMessage);\r\n  }\r\n\r\n  clearError(): void {\r\n    this.errorSubject.next(null);\r\n  }\r\n} ","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LoadingService {\r\n  private loadingSubject = new BehaviorSubject<boolean>(false);\r\n  loading$ = this.loadingSubject.asObservable();\r\n\r\n  setLoading(loading: boolean): void {\r\n    this.loadingSubject.next(loading);\r\n  }\r\n} ","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { BehaviorSubject, Observable, map, tap, catchError, throwError } from 'rxjs';\r\nimport { environment } from '../../../../environments/environment';\r\nimport { ErrorService } from '../../../core/services/error.service';\r\nimport { LoadingService } from '../../../core/services/loading.service';\r\n\r\nexport interface User {\r\n  id: string;\r\n  firstName: string;\r\n  lastName: string;\r\n  email: string;\r\n  role: string;\r\n}\r\n\r\nexport interface AuthResponse {\r\n  user: User;\r\n  token: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n  private apiUrl = `${environment.apiUrl}/auth`;\r\n  private currentUserSubject = new BehaviorSubject<User | null>(null);\r\n  currentUser$ = this.currentUserSubject.asObservable();\r\n  isAuthenticated$ = this.currentUser$.pipe(map(user => !!user));\r\n  isAdmin$ = this.currentUser$.pipe(map(user => {\r\n    console.log('Checking admin status for user:', user);\r\n    return user?.role?.toLowerCase() === 'admin';\r\n  }));\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private errorService: ErrorService,\r\n    private loadingService: LoadingService\r\n  ) {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      this.loadUserFromToken(token);\r\n    }\r\n  }\r\n\r\n  login(email: string, password: string): Observable<AuthResponse> {\r\n    this.loadingService.setLoading(true);\r\n    return this.http.post<AuthResponse>(`${this.apiUrl}/login`, { email, password }).pipe(\r\n      tap((response: AuthResponse) => {\r\n        console.log('Login response:', response);\r\n        localStorage.setItem('token', response.token);\r\n        this.currentUserSubject.next(response.user);\r\n        this.loadingService.setLoading(false);\r\n      }),\r\n      catchError((error: any) => {\r\n        this.loadingService.setLoading(false);\r\n        console.error('Login error:', error);\r\n        if (error.status === 401) {\r\n          return throwError(() => new Error('Hibás email cím vagy jelszó!'));\r\n        }\r\n        return throwError(() => new Error('Hiba történt a bejelentkezés során. Kérjük próbálja újra később.'));\r\n      })\r\n    );\r\n  }\r\n\r\n  register(firstName: string, lastName: string, email: string, password: string): Observable<AuthResponse> {\r\n    this.loadingService.setLoading(true);\r\n    return this.http.post<AuthResponse>(`${this.apiUrl}/register`, { firstName, lastName, email, password }).pipe(\r\n      tap((response: AuthResponse) => {\r\n        console.log('Register response:', response);\r\n        localStorage.setItem('token', response.token);\r\n        this.currentUserSubject.next(response.user);\r\n        this.loadingService.setLoading(false);\r\n      }),\r\n      catchError((error: any) => {\r\n        this.loadingService.setLoading(false);\r\n        console.error('Register error:', error);\r\n        if (error.status === 400) {\r\n          return throwError(() => new Error('Ez az email cím már foglalt!'));\r\n        }\r\n        return throwError(() => new Error('Hiba történt a regisztráció során. Kérjük próbálja újra később.'));\r\n      })\r\n    );\r\n  }\r\n\r\n  logout(): void {\r\n    localStorage.removeItem('token');\r\n    this.currentUserSubject.next(null);\r\n  }\r\n\r\n  private loadUserFromToken(token: string): void {\r\n    this.http.get<User>(`${this.apiUrl}/me`).subscribe({\r\n      next: (user) => {\r\n        console.log('Loaded user from token:', user);\r\n        this.currentUserSubject.next(user);\r\n      },\r\n      error: (error) => {\r\n        console.error('Error loading user from token:', error);\r\n        localStorage.removeItem('token');\r\n        this.currentUserSubject.next(null);\r\n      }\r\n    });\r\n  }\r\n} ","import { Injectable } from '@angular/core';\nimport { CanActivate, Router } from '@angular/router';\nimport { AuthService } from '../services/auth.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AdminGuard implements CanActivate {\n  constructor(private authService: AuthService, private router: Router) {}\n\n  canActivate(): boolean {\n    if (this.authService.isAdmin()) {\n      return true;\n    }\n\n    this.router.navigate(['/']);\n    return false;\n  }\n} ","import { Injectable } from '@angular/core';\r\nimport { CanActivate, Router } from '@angular/router';\r\nimport { AuthService } from '../services/auth.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthGuard implements CanActivate {\r\n  constructor(private authService: AuthService, private router: Router) {}\r\n\r\n  canActivate(): boolean {\r\n    if (this.authService.isAuthenticated()) {\r\n      return true;\r\n    }\r\n\r\n    this.router.navigate(['/login']);\r\n    return false;\r\n  }\r\n} ","import { Injectable } from '@angular/core';\nimport {\n  HttpRequest,\n  HttpHandler,\n  HttpEvent,\n  HttpInterceptor\n} from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { AuthService } from '../services/auth.service';\n\n@Injectable()\nexport class AuthInterceptor implements HttpInterceptor {\n  constructor(private authService: AuthService) {}\n\n  intercept(request: HttpRequest<unknown>, next: HttpHandler): Observable<HttpEvent<unknown>> {\n    const token = this.authService.getToken();\n    \n    if (token) {\n      request = request.clone({\n        setHeaders: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n    }\n\n    return next.handle(request);\n  }\n} ","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { BehaviorSubject, Observable, tap } from 'rxjs';\nimport { environment } from '../../environments/environment';\nimport { User } from '../models/user.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n  private apiUrl = `${environment.apiUrl}/auth`;\n  private currentUserSubject = new BehaviorSubject<User | null>(null);\n  public currentUser$ = this.currentUserSubject.asObservable();\n\n  constructor(private http: HttpClient) {\n    const storedUser = localStorage.getItem('currentUser');\n    if (storedUser) {\n      this.currentUserSubject.next(JSON.parse(storedUser));\n    }\n  }\n\n  register(userData: {\n    email: string;\n    password: string;\n    firstName: string;\n    lastName: string;\n  }): Observable<User> {\n    return this.http.post<User>(`${this.apiUrl}/register`, userData)\n      .pipe(tap(user => {\n        this.currentUserSubject.next(user);\n        localStorage.setItem('currentUser', JSON.stringify(user));\n      }));\n  }\n\n  login(credentials: { email: string; password: string }): Observable<User> {\n    return this.http.post<User>(`${this.apiUrl}/login`, credentials).pipe(\n      tap(user => {\n        // Debug, miért nem történik bejelentkezés\n        console.log('Bejelentkezés sikeres, kapott adatok:', user);\n\n        // A kapott felhasználó adatait tároljuk a state-ben\n        this.currentUserSubject.next(user);\n        \n        // Mindkét kulcs alatt tároljuk a nagyobb kompatibilitás érdekében\n        localStorage.setItem('currentUser', JSON.stringify(user));\n        localStorage.setItem('user', JSON.stringify(user));\n        \n        // Ha van token, azt is tároljuk külön\n        if (user && user.token) {\n          localStorage.setItem('token', user.token);\n        }\n        \n        console.log('Felhasználói adatok elmentve a localStorage-ba');\n      })\n    );\n  }\n\n  logout(): void {\n    // Nullázzuk a bejelentkezett felhasználó objektumát\n    this.currentUserSubject.next(null);\n    \n    // Minden kapcsolódó kulcsot töröljünk a localStorage-ból\n    localStorage.removeItem('currentUser');\n    localStorage.removeItem('user');\n    localStorage.removeItem('token');\n    \n    console.log('Kijelentkezés sikeres, felhasználói adatok törölve a localStorage-ból');\n  }\n\n  isAuthenticated(): boolean {\n    return this.currentUserSubject.value !== null;\n  }\n\n  getUserRole(): string | null {\n    return this.currentUserSubject.value?.role || null;\n  }\n\n  isAdmin(): boolean {\n    try {\n      console.log('isAdmin ellenőrzés kezdése...');\n      \n      // A currentUserSubject-ből közvetlenül ellenőrizzük\n      const currentUser = this.currentUserSubject.value;\n      if (currentUser && currentUser.role) {\n        const roleBasedCheck = currentUser.role.toLowerCase() === 'admin';\n        console.log(`Felhasználó szerepköre (currentUserSubject): ${currentUser.role}, admin: ${roleBasedCheck}`);\n        if (roleBasedCheck) return true;\n      }\n\n      // Ha a felhasználói objektum nincs a memóriában, próbáljuk a localStorage-ból (mindkét kulcsot)\n      let userData = null;\n      \n      // Először a 'user' kulcsot próbáljuk\n      const userString = localStorage.getItem('user');\n      if (userString) {\n        try {\n          const parsedData = JSON.parse(userString);\n          console.log('Parsolt adatok a \"user\" kulcs alatt:', parsedData);\n          \n          // Ellenőrizzük, hogy a szerkezet {user: {...}, token: ...} formátumú-e\n          if (parsedData && parsedData.user) {\n            console.log('Beágyazott user objektum:', parsedData.user);\n            userData = parsedData.user;\n          } else {\n            userData = parsedData; // Ha nem beágyazott, akkor közvetlenül használjuk\n          }\n        } catch (e) {\n          console.error('Hiba a user JSON elemzésekor:', e);\n        }\n      }\n      \n      // Ha nem találtunk használható adatot, próbáljuk a 'currentUser' kulcsot\n      if (!userData) {\n        const currentUserString = localStorage.getItem('currentUser');\n        if (currentUserString) {\n          try {\n            userData = JSON.parse(currentUserString);\n            console.log('Felhasználói adatok a \"currentUser\" kulcs alatt:', userData);\n          } catch (e) {\n            console.error('Hiba a currentUser JSON elemzésekor:', e);\n          }\n        }\n      }\n      \n      // Ellenőrizzük a role mezőt, ha van felhasználói adat\n      if (userData && userData.role) {\n        const roleBasedCheck = userData.role.toLowerCase() === 'admin';\n        console.log(`Felhasználó szerepköre (userData): ${userData.role}, admin: ${roleBasedCheck}`);\n        if (roleBasedCheck) return true;\n      }\n      \n      // ADMIN EMAIL ELLENőRZÉS\n      // Végső lehetőségként, ha a felhasználó email címe admin@admin.com, akkor is admin\n      if ((currentUser && currentUser.email === 'admin@admin.com') || \n          (userData && userData.email === 'admin@admin.com')) {\n        console.log('Email-alapú admin ellenőrzés sikeres! (admin@admin.com)');\n        return true;\n      }\n      \n      // HARDCODED ADMIN OVERRIDE a probléma azonnali megoldására\n      // Ha minden más ellenőrzés sikertelen, de tudjuk, hogy admin@admin.com egy admin fiók\n      const allUserDataStr = localStorage.getItem('user');\n      if (allUserDataStr) {\n        try {\n          const allUserData = JSON.parse(allUserDataStr);\n          console.log('Minden felhasználói adat:', allUserData);\n          \n          // Admin@admin.com specifikus fix a tesztéri célból\n          if (allUserData && allUserData.user && allUserData.user.email === 'admin@admin.com') {\n            console.log('ADMIN OVERRIDE: admin@admin.com részére admin jogosultság biztosítva!');\n            return true;\n          }\n        } catch {}\n      }\n      \n      // Ha minden ellenőrzés sikertelen\n      console.log('Nem találtunk admin jogosultságot egyik módszerrel sem.');\n      return false;\n    } catch (error) {\n      console.error('Hiba az admin jogosultság ellenőrzése közben:', error);\n      return false;\n    }\n  }\n\n  getCurrentUser(): User | null {\n    return this.currentUserSubject.value;\n  }\n  \n  /**\n   * Visszaadja a JWT tokent a localStorage-ból\n   * Ezt használja az AuthInterceptor az API kérésekhez\n   */\n  getToken(): string | null {\n    try {\n      // Először nézzük meg, van-e külön token kulcs\n      const directToken = localStorage.getItem('token');\n      if (directToken) {\n        return directToken;\n      }\n      \n      // Ha nincs külön token kulcs, akkor nézzük meg a user objektumot\n      const userStr = localStorage.getItem('user');\n      if (userStr) {\n        const userData = JSON.parse(userStr);\n        if (userData && userData.token) {\n          return userData.token;\n        }\n        \n        // Ellenőrizzük a beágyazott struktúrát is\n        if (userData && userData.user && userData.token) {\n          return userData.token;\n        }\n      }\n      \n      // Végül nézzük meg a currentUser kulcsot\n      const currentUserStr = localStorage.getItem('currentUser');\n      if (currentUserStr) {\n        const currentUserData = JSON.parse(currentUserStr);\n        if (currentUserData && currentUserData.token) {\n          return currentUserData.token;\n        }\n      }\n      \n      console.log('Nem találtunk tokent a localStorage-ban');\n      return null;\n    } catch (e) {\n      console.error('Hiba a token kinyerésénél:', e);\n      return null;\n    }\n  }\n} ","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Observable, catchError, throwError } from 'rxjs';\nimport { environment } from '../../environments/environment';\nimport { Event, NewEvent, TicketCategory } from '../models/event.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EventService {\n  private apiUrl = `${environment.apiUrl}/events`;\n\n  constructor(private http: HttpClient) {}\n\n  getEvents(): Observable<Event[]> {\n    return this.http.get<Event[]>(this.apiUrl);\n  }\n\n  getEvent(id: string): Observable<Event> {\n    return this.http.get<Event>(`${this.apiUrl}/${id}`);\n  }\n\n  /**\n   * Új esemény létrehozása\n   * @param eventData Az új esemény adatai\n   */\n  createEvent(eventData: any): Observable<Event> {\n    // Biztositsuk, hogy van legalabb egy jegykategoria\n    let ticketCategories = eventData.ticketCategories || [];\n    if (!Array.isArray(ticketCategories) || ticketCategories.length === 0) {\n      ticketCategories = [{\n        name: 'Alap jegy',\n        price: 1000,\n        availableTickets: 100\n      }];\n    }\n    \n    // Számítsuk ki a teljes jegy mennyiséget\n    const totalTickets = ticketCategories.reduce(\n      (sum: number, category: TicketCategory) => sum + (Number(category.availableTickets) || 0), 0\n    );\n\n    // Készítsünk egy típushelyes új eseményt\n    const newEvent: NewEvent = {\n      title: eventData.title,\n      description: eventData.description,\n      date: new Date(eventData.date).toISOString(),\n      location: eventData.location,\n      imageUrl: eventData.imageUrl || '',\n      ticketCategories: ticketCategories,\n      availableTickets: totalTickets\n    };\n    \n    // Szerző hozzáadása, ha megtalálható\n    try {\n      // Először próbáljuk a user kulcsot\n      const userStr = localStorage.getItem('user');\n      if (userStr) {\n        const userData = JSON.parse(userStr);\n        if (userData && userData.user && userData.user._id) {\n          newEvent.organizer = userData.user._id;\n        } else if (userData && userData._id) {\n          newEvent.organizer = userData._id;\n        }\n      }\n      \n      // Ha nincs, próbáljuk a currentUser kulcsot\n      if (!newEvent.organizer) {\n        const currentUserStr = localStorage.getItem('currentUser');\n        if (currentUserStr) {\n          const currentUserData = JSON.parse(currentUserStr);\n          if (currentUserData && currentUserData._id) {\n            newEvent.organizer = currentUserData._id;\n          }\n        }\n      }\n    } catch (e) {\n      console.error('Hiba a felhasználó ID kiolvasása közben:', e);\n    }\n    \n    console.log('Küldés a szervernek:', newEvent);\n    return this.http.post<Event>(this.apiUrl, newEvent);\n  }\n\n  updateEvent(id: string, event: Event): Observable<Event> {\n    return this.http.put<Event>(`${this.apiUrl}/${id}`, event);\n  }\n\n  deleteEvent(id: string): Observable<void> {\n    return this.http.delete<void>(`${this.apiUrl}/${id}`);\n  }\n\n  getOrganizerEvents(): Observable<Event[]> {\n    return this.http.get<Event[]>(`${environment.apiUrl}/api/users/my-events`);\n  }\n} ","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from '../../environments/environment';\r\nimport { Ticket } from '../models/ticket.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TicketService {\r\n  private apiUrl = `${environment.apiUrl}/tickets`;\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  purchaseTicket(eventId: string, categoryName: string): Observable<Ticket> {\r\n    return this.http.post<Ticket>(`${environment.apiUrl}/api/tickets`, {\r\n      eventId,\r\n      categoryName\r\n    });\r\n  }\r\n\r\n  getUserTickets(): Observable<Ticket[]> {\r\n    return this.http.get<Ticket[]>(`${this.apiUrl}/user`);\r\n  }\r\n\r\n  cancelTicket(ticketId: string): Observable<void> {\r\n    return this.http.post<void>(`${this.apiUrl}/${ticketId}/cancel`, {});\r\n  }\r\n\r\n  getEventTickets(eventId: string): Observable<Ticket[]> {\r\n    return this.http.get<Ticket[]>(`${environment.apiUrl}/api/tickets/event/${eventId}`);\r\n  }\r\n} ","export const environment = {\r\n  production: false,\r\n  apiUrl: 'http://localhost:3000/api'\r\n}; ","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\nimport { AppModule } from './app/app.module';\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err)); "],"names":["RouterModule","EventListComponent","EventDetailsComponent","EventFormComponent","LoginComponent","RegisterComponent","TicketListComponent","AuthGuard","AdminGuard","routes","path","redirectTo","pathMatch","component","canActivate","AppRoutingModule","forRoot","imports","i1","exports","AppComponent","constructor","authService","title","ngOnInit","logout","i0","ɵɵdirectiveInject","AuthService","selectors","decls","vars","consts","template","AppComponent_Template","rf","ctx","ɵɵelement","ɵɵelementStart","ɵɵelementEnd","BrowserModule","HttpClientModule","HTTP_INTERCEPTORS","FormsModule","ReactiveFormsModule","NavbarComponent","FooterComponent","TicketPurchaseComponent","EventService","TicketService","AuthInterceptor","AppModule","bootstrap","provide","useClass","multi","declarations","Validators","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","errorMessage","ɵɵtemplate","LoginComponent_div_13_div_1_Template","LoginComponent_div_13_div_2_Template","ɵɵproperty","ctx_r1","email","errors","LoginComponent_div_18_div_1_Template","LoginComponent_div_18_div_2_Template","ctx_r2","password","formBuilder","router","loginForm","group","required","minLength","get","onSubmit","invalid","value","login","subscribe","next","navigate","error","console","status","FormBuilder","i2","i3","Router","LoginComponent_Template","LoginComponent_div_7_Template","ɵɵlistener","LoginComponent_Template_form_ngSubmit_8_listener","LoginComponent_div_13_Template","LoginComponent_div_18_Template","ɵɵclassProp","touched","RegisterComponent_div_13_div_1_Template","firstName","RegisterComponent_div_18_div_1_Template","lastName","RegisterComponent_div_23_div_1_Template","RegisterComponent_div_23_div_2_Template","ctx_r3","RegisterComponent_div_28_div_1_Template","RegisterComponent_div_28_div_2_Template","ctx_r4","RegisterComponent_div_33_div_1_Template","RegisterComponent_div_33_div_2_Template","ctx_r5","confirmPassword","registerForm","validators","passwordMatchValidator","form","passwordMismatch","register","RegisterComponent_Template","RegisterComponent_div_7_Template","RegisterComponent_Template_form_ngSubmit_8_listener","RegisterComponent_div_13_Template","RegisterComponent_div_18_Template","RegisterComponent_div_23_Template","RegisterComponent_div_28_Template","RegisterComponent_div_33_Template","event","imageUrl","ɵɵsanitizeUrl","EventDetailsComponent_div_3_div_28_button_11_Template_button_click_0_listener","ɵɵrestoreView","_r11","category_r7","ɵɵnextContext","$implicit","ctx_r9","ɵɵresetView","purchaseTicket","_id","EventDetailsComponent_div_3_div_28_button_11_Template","ɵɵtextInterpolate","name","price","availableTickets","isAuthenticated","EventDetailsComponent_div_3_button_32_Template_button_click_0_listener","_r13","ctx_r12","ticketCategories","EventDetailsComponent_div_3_button_33_Template_button_click_0_listener","_r15","ctx_r14","editEvent","EventDetailsComponent_div_3_img_3_Template","EventDetailsComponent_div_3_div_28_Template","EventDetailsComponent_div_3_button_32_Template","EventDetailsComponent_div_3_button_33_Template","description","ɵɵpipeBind2","date","location","getUserRole","route","eventService","loading","currentUser","eventId","snapshot","paramMap","loadEvent","getCurrentUser","id","getEvent","err","categoryId","queryParams","category","ActivatedRoute","EventDetailsComponent_Template","EventDetailsComponent_div_1_Template","EventDetailsComponent_div_2_Template","EventDetailsComponent_div_3_Template","EventFormComponent_div_39_Template_button_click_5_listener","restoredCtx","i_r6","index","ctx_r10","removeTicketCategory","EventFormComponent_div_39_div_11_Template","EventFormComponent_div_39_div_16_Template","EventFormComponent_div_39_div_21_Template","tmp_3_0","at","tmp_5_0","tmp_7_0","tmp_9_0","tmp_11_0","tmp_13_0","fb","isEditMode","eventForm","array","addTicketCategory","push","min","removeAt","patchValue","Date","toISOString","split","forEach","formData","length","Array","isArray","newEventData","calculateTotalAvailableTickets","log","existingEvent","updateEvent","createEvent","message","requestBody","JSON","stringify","e","categories","reduce","total","parseInt","EventFormComponent_Template","EventFormComponent_Template_form_ngSubmit_8_listener","EventFormComponent_div_13_Template","EventFormComponent_div_18_Template","EventFormComponent_div_23_Template","EventFormComponent_div_28_Template","EventFormComponent_Template_button_click_37_listener","EventFormComponent_div_39_Template","EventFormComponent_Template_button_click_43_listener","tmp_2_0","tmp_4_0","tmp_6_0","tmp_8_0","controls","EventListComponent_div_7_Template_button_click_1_listener","_r5","event_r6","EventListComponent_div_9_button_20_Template_button_click_0_listener","ctx_r11","EventListComponent_div_9_button_21_Template_button_click_0_listener","_r16","EventListComponent_div_9_img_2_Template","EventListComponent_div_9_Template_button_click_18_listener","_r18","ctx_r17","viewDetails","EventListComponent_div_9_button_20_Template","EventListComponent_div_9_button_21_Template","hasAdminRole","isAdmin","events","loadEvents","userData","localStorage","getItem","userDataStr","parse","role","getEvents","EventListComponent_Template","EventListComponent_div_5_Template","EventListComponent_div_6_Template","EventListComponent_div_7_Template","EventListComponent_div_9_Template","currentYear","getFullYear","FooterComponent_Template","NavbarComponent_li_15_Template_a_click_1_listener","NavbarComponent_Template","NavbarComponent_li_11_Template","NavbarComponent_li_13_Template","NavbarComponent_li_14_Template","NavbarComponent_li_15_Template","TicketListComponent_div_5_button_36_Template_button_click_0_listener","_r8","ticket_r4","ctx_r6","cancelTicket","TicketListComponent_div_5_button_36_Template","purchaseDate","ɵɵclassMap","ɵɵpipeBind1","ticketService","tickets","loadTickets","getUserTickets","ticketId","confirm","TicketListComponent_Template","TicketListComponent_div_5_Template","TicketListComponent_div_6_Template","TicketListComponent_div_7_Template","TicketListComponent_div_8_Template","category_r5","ɵɵtextInterpolate3","selectedCategory","tmp_0_0","purchaseForm","TicketPurchaseComponent_div_3_Template_form_ngSubmit_7_listener","_r7","TicketPurchaseComponent_div_3_Template_select_change_11_listener","ctx_r8","onCategoryChange","TicketPurchaseComponent_div_3_option_14_Template","TicketPurchaseComponent_div_3_div_19_Template","undefined","quantity","find","c","i4","TicketPurchaseComponent_Template","TicketPurchaseComponent_div_1_Template","TicketPurchaseComponent_div_2_Template","TicketPurchaseComponent_div_3_Template","BehaviorSubject","ErrorService","errorSubject","error$","asObservable","handleError","clearError","factory","ɵfac","providedIn","LoadingService","loadingSubject","loading$","setLoading","map","tap","catchError","throwError","environment","http","errorService","loadingService","apiUrl","currentUserSubject","currentUser$","isAuthenticated$","pipe","user","isAdmin$","toLowerCase","token","loadUserFromToken","post","response","setItem","Error","removeItem","ɵɵinject","HttpClient","intercept","request","getToken","clone","setHeaders","Authorization","handle","storedUser","credentials","roleBasedCheck","userString","parsedData","currentUserString","allUserDataStr","allUserData","directToken","userStr","currentUserStr","currentUserData","eventData","totalTickets","sum","Number","newEvent","organizer","put","deleteEvent","delete","getOrganizerEvents","categoryName","getEventTickets","production","__NgCli_bootstrap_1","platformBrowser","bootstrapModule","catch"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}